# Task01. 时序数据与 PyPOTS 学习笔记

## 一、时间序列数据介绍

### （一）定义与特点

时间序列是按时间顺序排列的观测数据，具有时间依赖性。例如，每日气温记录、股票收盘价、心率变化等都是典型的时间序列。与独立同分布数据不同，时间序列的当前数据往往受过去数据影响，如降雨影响空气湿度、股市波动受前期行情影响等。

### （二）数据类型

1.  **按变量数量**：
    
    -   **单变量时间序列**：仅包含一个变量在不同时间点的取值。例如每日温度记录、股票收盘价等。
        
    -   **多变量时间序列**：包含多个相关变量在同一时间点的记录。例如传感器网络中每秒采集的温度、湿度和压力，多支股票的价格随时间的联动变化等。
        
2.  **按时间间隔**：
    
    -   **等间隔**：数据点之间的时间间隔固定，如每分钟记录一次心跳。
        
    -   **非等间隔**：数据点在时间轴上分布不规律，如社交媒体上的用户发帖记录。
        
3.  **按周期性**：
    
    -   **周期性**：数据在固定的时间间隔内重复出现，如每周的气温变化。
        
    -   **非周期性**：数据在固定时间间隔内不重复出现，如用户的在线时间记录。
        
4.  **按趋势**：
    
    -   **趋势**：数据呈现上升、下降或平稳的趋势。
        
    -   **无趋势**：数据没有明显的趋势。
        
5.  **按季节性**：
    
    -   **季节性**：数据在特定时间点呈现明显的周期性变化。
        
    -   **无季节性**：数据在特定时间点不呈现明显的周期性变化。
        
6.  **按完整性**：
    
    -   **缺失值**：数据集中存在部分时间点的缺失值。
        
    -   **完整数据**：数据集中不存在缺失值。
        
7.  **按动态性**：
    
    -   **静态**：数据在时间上保持不变，如气象站的气象数据。
        
    -   **动态**：数据在时间上发生变化，如用户的在线时间记录。
        

### （三）常见例子

涵盖金融（股票价格、外汇汇率等）、医疗（心电图、血糖水平等）、环境（气温、污染物浓度等）、交通（车流量、通行计数等）、用户行为（点击、搜索等）、工业 IoT（设备振动、电流等）、零售物流（销量、库存等）、能源（电力负载、发电量等）、音频视频流（语音信号、像素值序列等）、体育生物力学（动作数据、跑步速度等）等多个领域。

### （四）研究与应用方向

1.  **预测**：
    
    -   **目标**：根据已有的历史时间序列数据，预测未来一段时间的数值。
        
    -   **数学定义**：给定一个时间序列 {x1​,x2​,…,xT​}，预测未来 h 个时间步的值：x^T+1​,x^T+2​,…,x^T+h​。
        
    -   **常见方法**：ARIMA、Prophet、LSTM、Transformer、Informer、N-BEATS、TimesNet。
        
    -   **应用示例**：预测未来几小时的用电负荷（电力调度）、股票价格走势预测（量化金融）、疫情趋势预测（公共卫生）。
        
2.  **分类**：
    
    -   **目标**：根据时间序列的整体形态或子序列模式，将其分到某一类中。
        
    -   **数学定义**：给定一组时间序列 {X(i)}i=1N​，每个序列 X(i)={x1(i)​,…,xT(i)​}，对应一个类别标签 y(i)∈{1,2,...,C}，训练分类器 f 使得：f(X(i))=y(i)。
        
    -   **常见方法**：1-NN + DTW、CNN、LSTM、InceptionTime、ROCKET、TST、MiniRocket。
        
    -   **应用示例**：根据心电图判断是否存在心律不齐（医学诊断）、根据加速度序列识别人的动作（人机交互）、根据用户的点击行为预测其兴趣偏好（个性化推荐）。
        
3.  **聚类**：
    
    -   **目标**：将一组时间序列按照其相似性自动分组，无需监督标签。
        
    -   **数学定义**：给定时间序列集合 {X(1),…,X(N)}，找出划分函数 g，将其划分为 K 个簇：g:X(i)↦{1,2,...,K}。
        
    -   **常见方法**：K-Means + DTW、Spectral Clustering、TICC（时间卷积聚类）、Deep Temporal Clustering。
        
    -   **应用示例**：将不同设备的运行曲线聚类以发现常见模式、将社交媒体用户行为轨迹聚类以发现群体偏好、聚类气象站点时间序列以识别气候区。
        
4.  **异常检测**：
    
    -   **目标**：识别出不符合历史规律的时间点或时间段，可能代表系统故障或异常行为。
        
    -   **数学定义**：给定时间序列 X={x1​,…,xT​}，输出对应的异常得分序列 s={s1​,…,sT​}，或标签序列 y∈{0,1}T，其中 1 表示异常。
        
    -   **常见方法**：基于预测误差（如 AutoEncoder、LSTM、GAN）、基于重构误差、基于概率建模（如 Gaussian Process）、基于分布距离（如 KLD）。
        
    -   **应用示例**：信用卡欺诈交易检测（金融安全）、工业设备异常运行检测（工业 4.0）、网络攻击行为检测（网络安全）。
        
5.  **时间序列生成**：
    
    -   **目标**：学习时间序列的潜在分布，生成具有相似特征的“新”时间序列。
        
    -   **数学定义**：目标是学得一个生成模型 G(z)，从噪声 z∼N(0,I) 中生成具有相似统计特征的序列 x~=G(z)。
        
    -   **常见方法**：TimeGAN、C-RNN-GAN、TTS-CNN、Diffusion Models for Time Series。
        
    -   **应用示例**：生成合成医疗数据用于隐私保护和模型训练、生成设备运行数据以补充稀缺样本、增强训练集以提高模型鲁棒性。
        
6.  **插补**：
    
    -   **目标**：在时间序列中存在缺失值的情况下，准确地估计这些缺失位置上的数据，从而恢复完整的序列。
        
    -   **数学定义**：设原始时间序列为：X={x1​,x2​,...,xT​}，其中存在缺失值的位置集合 M⊆{1,...,T}，任务是学习一个函数 f，估计缺失点的值：x^t​=f(Xobs​),∀t∈M，其中 Xobs​ 表示可观测到的（非缺失的）部分数据。
        
    -   **常见方法**：
        
        -   **简单插值法**：前向填充、后向填充、线性插值、样条插值
            
        -   **统计建模方法**：K 近邻（KNN）、EM 算法、Kalman 滤波
            
        -   **机器学习方法**：
            
            -   **回归 / 深度学习模型**：BRITS、GRU-D、SAITS、Transformer-based 模型（如 TimesNet-Imputer）
                
            -   **图神经网络方法**：基于节点依赖关系进行插补，如 GRIN、CSDI（使用扩散模型进行序列插补）
                
            -   **概率建模方法**：Variational AutoEncoder（VAE）、Gaussian Process（GP）
                
    -   **应用示例**：
        
        -   **医疗健康**：病人某些指标记录不全，通过插补恢复完整生理曲线用于后续分析（如 ICU 病人血压数据中的空值）
            
        -   **环境监测**：气象传感器故障导致数据缺失时，需通过历史数据或邻近站点信息填补空缺
            
        -   **工业设备监控**：由于网络延迟或硬件故障，部分传感器读数缺失，影响异常检测或预测任务
            
        -   **金融数据修复**：部分交易日缺失的价格数据需插补以满足模型输入的完整性
            

## 二、PyPOTS 介绍

### （一）简介

PyPOTS 是专为处理部分观测时间序列（POTS）设计的开源 Python 工具箱。现实世界中，时间序列数据常因传感器故障、通信错误等存在缺失值，影响数据分析和建模准确性。PyPOTS 旨在为工程师和研究人员提供便捷工具，使其专注核心问题，无需过多担心数据缺失部分，且会持续更新经典和先进算法，提供统一接口、详细学习指南和应用示例。

### （二）支持的核心任务

1.  **缺失值填补**：
    
    -   实现 12 种以上填补算法，涵盖传统方法（前向填充、后向填充、线性插值）、深度学习方法（SAITS、BRITS、GRU-D 等）和概率模型（BTTF 等）。
        
2.  **预测**：
    
    -   支持 Impute-then-Forecast 方法链和端到端预测模型，如 Transformer、GRU 基模型等，可与填补模块无缝连接。
        
3.  **分类**：
    
    -   提供基于 RNN、Transformer 等的深度分类模型，可结合填补模块预处理数据，支持多任务学习。
        
4.  **聚类**：
    
    -   包括填补 + 聚类、特征提取 + 聚类等方式，支持对比学习风格的时间序列表示学习。
        
5.  **异常检测**：
    
    -   采用填补 + Reconstruction-Based 方法、基于统计的方法、Transformer-based 模型等处理带缺失的异常检测任务。
        

### （三）生态系统

1.  **TSDB（时间序列数据集仓库）**：
    
    -   提供标准化的多领域数据集（如医疗、交通、气象等），用户可一行代码下载加载，统一格式便于对比实验。
        
2.  **PyGrinder（缺失机制模拟器）**：
    
    -   可模拟不同缺失机制（MCAR、MAR、MNAR、Block Missing 等），用户可自定义参数构建灵活模拟实验，用于研究缺失对模型性能的影响等。
        
3.  **BenchPOTS（算法基准评估套件）**：
    
    -   提供完整可复现的基准测试流程，支持多种评估指标，自动划分数据集、填补缺失并训练模型、可视化结果与导出指标，便于模型对比。
        
4.  **BrewPOTS（教程与代码示例集合）**：
    
    -   包含大量 Notebook 教程和真实案例代码，覆盖安装入门、缺失填补、多任务演示等内容，降低初学者学习曲线。
        

PyPOTS 作为带缺失值时间序列数据的全流程解决方案，集成众多高质量算法模型，设计完整生态系统，已被 MIT、斯坦福、微软等机构和企业采用，具有重要学术与工业价值。
